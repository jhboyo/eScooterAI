"""
Step 5: YAML íŒŒì¼ ìƒì„±

YOLO í›ˆë ¨ì„ ìœ„í•œ ë°ì´í„°ì…‹ ì„¤ì • íŒŒì¼(ppe_dataset.yaml)ì„ ìƒì„±í•©ë‹ˆë‹¤.

## YAML íŒŒì¼ì´ë€?
ë°ì´í„°ì…‹ì˜ êµ¬ì¡°ì™€ í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì •ì˜í•˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.
YOLO ëª¨ë¸ì´ í›ˆë ¨í•  ë•Œ ì´ íŒŒì¼ì„ ì½ì–´ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤:
- ì´ë¯¸ì§€ê°€ ì–´ë””ì— ìˆëŠ”ì§€ (train/val/test ê²½ë¡œ)
- ëª‡ ê°œì˜ í´ë˜ìŠ¤ë¥¼ íƒì§€í• ì§€ (nc: number of classes)
- ê° í´ë˜ìŠ¤ì˜ ì´ë¦„ì´ ë¬´ì—‡ì¸ì§€ (names: helmet, vest ë“±)

## ì–¸ì œ ì‚¬ìš©ë˜ë‚˜ìš”?
1. ëª¨ë¸ í›ˆë ¨ ì‹œ:
   model.train(data='configs/ppe_dataset.yaml', ...)

2. ëª¨ë¸ ê²€ì¦ ì‹œ:
   model.val(data='configs/ppe_dataset.yaml')

## ìƒì„±ë˜ëŠ” íŒŒì¼ ì˜ˆì‹œ
```yaml
path: /path/to/images        # ë°ì´í„°ì…‹ ë£¨íŠ¸ ê²½ë¡œ
train: train/images          # í›ˆë ¨ ì´ë¯¸ì§€ ê²½ë¡œ
val: val/images              # ê²€ì¦ ì´ë¯¸ì§€ ê²½ë¡œ
test: test/images            # í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ê²½ë¡œ
nc: 2                        # í´ë˜ìŠ¤ ìˆ˜
names:
  0: helmet                  # í´ë˜ìŠ¤ IDì™€ ì´ë¦„ ë§¤í•‘
  1: vest
```
"""

from pathlib import Path


def generate_yaml():
    """ë°ì´í„°ì…‹ YAML íŒŒì¼ ìƒì„±"""

    # ê²½ë¡œ ì„¤ì •
    base_dir = Path(__file__).parent.parent.parent
    config_dir = base_dir / 'configs'

    # ì„¤ì • ë””ë ‰í† ë¦¬ ìƒì„±
    config_dir.mkdir(parents=True, exist_ok=True)

    print("=" * 50)
    print("Step 5: YAML íŒŒì¼ ìƒì„±")
    print("=" * 50)

    # YAML ë‚´ìš© (ìƒëŒ€ ê²½ë¡œ ì‚¬ìš© - configs í´ë” ê¸°ì¤€)
    yaml_content = """# PPE Detection Dataset Configuration
# Generated by step5_generate_yaml.py

# ë°ì´í„°ì…‹ ê²½ë¡œ (configs í´ë” ê¸°ì¤€ ìƒëŒ€ ê²½ë¡œ)
path: ../images

# ë°ì´í„° ë¶„í• 
train: train/images
val: val/images
test: test/images

# í´ë˜ìŠ¤ ìˆ˜
nc: 2

# í´ë˜ìŠ¤ ì´ë¦„
names:
  0: helmet
  1: vest
"""

    # íŒŒì¼ ì €ì¥
    yaml_path = config_dir / 'ppe_dataset.yaml'
    with open(yaml_path, 'w') as f:
        f.write(yaml_content)

    print(f"âœ… YAML íŒŒì¼ ìƒì„± ì™„ë£Œ!")
    print(f"   - ê²½ë¡œ: {yaml_path}")
    print()
    print("ğŸ“„ íŒŒì¼ ë‚´ìš©:")
    print("-" * 40)
    print(yaml_content)
    print()

    return yaml_path


if __name__ == '__main__':
    generate_yaml()
