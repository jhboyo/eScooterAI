"""
Step 4: YAML íŒŒì¼ ìƒì„±

YOLO í›ˆë ¨ì„ ìœ„í•œ ë°ì´í„°ì…‹ ì„¤ì • íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
"""

import os
from pathlib import Path


def generate_yaml():
    """ë°ì´í„°ì…‹ YAML íŒŒì¼ ìƒì„±"""

    # ê²½ë¡œ ì„¤ì •
    base_dir = Path(__file__).parent.parent.parent
    config_dir = base_dir / 'configs'
    images_dir = base_dir / 'images'

    # ì„¤ì • ë””ë ‰í† ë¦¬ ìƒì„±
    config_dir.mkdir(parents=True, exist_ok=True)

    print("=" * 50)
    print("Step 4: YAML íŒŒì¼ ìƒì„±")
    print("=" * 50)

    # YAML ë‚´ìš©
    yaml_content = f"""# PPE Detection Dataset Configuration
# Generated by step4_generate_yaml.py

# ë°ì´í„°ì…‹ ê²½ë¡œ (ì ˆëŒ€ ê²½ë¡œ)
path: {images_dir}

# ë°ì´í„° ë¶„í• 
train: train/images
val: val/images
test: test/images

# í´ë˜ìŠ¤ ìˆ˜
nc: 2

# í´ë˜ìŠ¤ ì´ë¦„
names:
  0: helmet
  1: vest
"""

    # íŒŒì¼ ì €ì¥
    yaml_path = config_dir / 'ppe_dataset.yaml'
    with open(yaml_path, 'w') as f:
        f.write(yaml_content)

    print(f"âœ… YAML íŒŒì¼ ìƒì„± ì™„ë£Œ!")
    print(f"   - ê²½ë¡œ: {yaml_path}")
    print()
    print("ğŸ“„ íŒŒì¼ ë‚´ìš©:")
    print("-" * 40)
    print(yaml_content)
    print()

    return yaml_path


if __name__ == '__main__':
    generate_yaml()
